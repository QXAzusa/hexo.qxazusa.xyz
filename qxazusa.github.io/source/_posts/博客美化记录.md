---
title: 博客美化记录
date: 2021-07-15 17:40:47
tags: 建站
cover: https://cdn.jsdelivr.net/npm/qxazusa-blog/atboq-yfkwm.webp
---
本站使用[Hexo](https://hexo.io/zh-cn/)为基本架构，[butterfly](https://github.com/jerryc127/hexo-theme-butterfly)为主题的基础上进行修改的。

# 配置文件

本站博客与主题的_config.yml以供参考：

[站点](https://gitee.com/jshahezy/blogs/blob/master/_config%20(%E7%AB%99%E7%82%B9).yml)(存放位置：[Blogroot])&nbsp;&nbsp;&nbsp;[主题](https://gitee.com/jshahezy/blogs/blob/master/_config%20(%E4%B8%BB%E9%A2%98).yml)(存放位置：[Blogroot]\themes\butterfly)

# CSS嵌入式

## 嵌入方法
在“博客根目录\themes\butterfly\source\css”下新建CSS文件

打开主题配置文件,在head下方写入  

```yaml
- <link rel="stylesheet" href="/css/CSS文件的文件名.css">
```

例如

```yaml
   inject:
    head:
   - <link rel="stylesheet" href="/css/partbackground.css">
   - <link rel="stylesheet" href="/css/background.css">
   #以此类推进行叠加
```

## 模块透明化

```css
#recent-posts>.recent-post-item,.layout>div:first-child:not(.recent-posts),.layout_post>#page,.layout_post>#post,.read-mode .layout_post>#post
{
    background: rgba(255,255,255,.9);
    /* .9为透明度0.9，以此类推.8为透明度0.8，1为不透明 */
}
#aside-content .card-widget
{
    background: rgba(255,255,255,.9);
}
```

## 全屏图片背景

修改主题配置文件

```yaml
disable_top_img: true
```

之后嵌入CSS文件

```css
#web_bg {
    /* 背景图像的地址（url括号里）  */
    background: url('https://gitee.com/jshahezy/blogs/raw/master/res/5005df7fec55a8b4980d0426566114f8c64df94a-min.webp');
    /* 背景图像不重复 */
    background-repeat: no-repeat;
    /* 背景图像大小 */
    background-size: cover;
    /* 背景图像居中显示 */
    background-position: center;
}
```

## 半透明底部

```css
#footer {
    background: rgba(255,255,255,.15);/* 其中.15为透明度，根据需要修改即可 */
    color: #000;
    border-top-right-radius: 20px;
    border-top-left-radius: 20px;
    backdrop-filter: saturate(100%) blur(5px)
}

    #footer::before {
        background: rgba(255,255,255,.15)
            /* 其中.15为透明度，根据需要修改即可 */
    }

    #footer #footer-wrap {
        color: rgb(254, 44, 131)
    /* 此处为底部文字的颜色，下一部分同理 */
	}

        #footer #footer-wrap a {
            color: rgb(254, 44, 131)
        }

```

## 引入阿里矢量图标库

参考<a href="https://www.cnblogs.com/MoYu-zc/p/14399186.html">Hexo-使用阿里iconfont图标 </a>即可，此处不过度说明。

# 模块安装式

## 使用Live2D模型

### 本地部署

在博客根目录下安装依赖

```shell
npm install --save hexo-helper-live2d
```

打开站点配置文件 `[Blogroot]\config.yml`
搜索 live2d, 按照如下注释内容指示进行操作
如果没有搜到 live2d 的配置项，就直接把以下内容复制到最底部

```yaml
# Live2D
## https://github.com/EYHN/hexo-helper-live2d
live2d:
  enable: true #开关插件版看板娘
  scriptFrom: local
  pluginRootPath: live2dw/ # 插件在站点上的根目录(相对路径)
  pluginJsPath: lib/ # 脚本文件相对与插件根目录路径
  pluginModelPath: assets/ # 模型文件相对与插件根目录路径
  tagMode: false # 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中
  debug: false # 调试, 是否在控制台输出日志
  model:
    use: live2d-widget-model-wanko # npm-module package name
  display:
    position: right #控制看板娘位置
    width: 150 #控制看板娘大小
    height: 300 #控制看板娘大小
  mobile:
    show: true # 手机中是否展示
```

在网站根目录下安装主题

```bash
npm install live2d-widget-model-wanko
```

在博客根目录下新建文件夹live2dw，将`[Blogroot]\node_modules\hexo-helper-live2d`和`[Blogroot]\node_modules\live2d-widget-model-wanko `下的所有文件复制到live2dw文件夹下。

其中所有的wanko均为主题名，可以根据需要替换为其他的[主题名](https://huaji8.top/post/live2d-plugin-2.0/)进行安装

### 调用外部资源

打开站点配置文件 `[Blogroot]\config.yml`
搜索 live2d, 按照如下注释内容指示进行操作
如果没有搜到 live2d 的配置项，就直接把以下内容复制到最底部
```yaml
# Live2D
## https://github.com/EYHN/hexo-helper-live2d
live2d:
  enable: true #开关插件版看板娘
  scriptFrom: jsdelivr # jsdelivr CDN
  tagMode: false # 标签模式, 是否仅替换 live2d tag标签而非插入到所有页面中
  debug: false # 调试, 是否在控制台输出日志
  model:
     use: https://cdn.jsdelivr.net/npm/live2d-widget-model-wanko/assets/wanko.model.json # 你的自定义 url
  display:
    position: right #控制看板娘位置
    width: 150 #控制看板娘大小
    height: 300 #控制看板娘大小
  mobile:
    show: true # 手机中是否展示
```

其中第9行中的wanko为主题名，可以根据需要替换为其他的[主题名](https://huaji8.top/post/live2d-plugin-2.0/)进行安装

注意：在每次修改过live2d的内容后务必执行一次hexo clean命令再生成上传，不然不能生效。

## Bilibili追番页面

此部分内容参考Github项目[hexo-bilibili-bangumi](https://github.com/HCLonely/hexo-bilibili-bangumi) 

安装依赖

```bash
npm install hexo-bilibili-bangumi --save
```
将下面的配置写入站点的配置文件 `_config.yml` 里(不是主题的配置文件).

``` yaml
bangumi:
  enable: true
  path:
  vmid:
  title: '追番列表'
  quote: '生命不息，追番不止！'
  show: 1
  loading:
  metaColor:
  color:
  webp:
  progress:
```

- **enable**: 是否启用
- **path**: 番剧页面路径，默认`bangumis/index.html`
- **vmid**: 哔哩哔哩的 `uid`（登录哔哩哔哩后前往[https://space.bilibili.com/](https://space.bilibili.com/)页面，网址最后的一串数字就是 `uid`）
- **title**: 该页面的标题
- **quote**: 写在页面开头的一段话，支持 html 语法，可留空。
- **show**: 初始显示页面：`0: 想看`, `1: 在看`, `2: 看过`，默认为`1`
- **loading**: 图片加载完成前的 loading 图片
- **metaColor**: meta 部分(简介上方)字体颜色
- **color**: 简介字体颜色
- **webp**: 番剧封面使用`webp`格式(此格式在`safari`浏览器下不显示，但是图片大小可以缩小 100 倍左右), 默认`true`
- **progress**: 获取番剧数据时是否显示进度条，默认`true`

注意：

1. 在`hexo generate`或`hexo deploy`之前使用`hexo bangumi -u`命令更新番剧数据！
2. 删除数据命令:`hexo bangumi -d`

***需要将追番列表设置为公开！***

## 信笺样式留言板

安装模块

```bash
npm install hexo-butterfly-envelope --save
```

在站点配置文件或者主题配置文件添加配置项

```yaml
# envelope_comment
# see https://akilar.top/posts/58900a8/
envelope_comment:
  enable: true #开关
  cover: https://ae01.alicdn.com/kf/U5bb04af32be544c4b41206d9a42fcacfd.jpg #信笺封面图
  message: #信笺内容，支持多行
    - 有什么想问的？
    - 有什么想说的？
    - 有什么想吐槽的？
    - 哪怕是有什么想吃的，都可以告诉我哦~
  bottom: 自动书记人偶竭诚为您服务！ #信笺结束语，只能单行
  height: #调整信笺划出高度，默认1050px
  path: #【可选】comments 的路径名称。默认为 comments，生成的页面为 comments/index.html
  front_matter: #【可选】comments页面的 front_matter 配置
    title: 留言板
    comments: true
```

## 全局音乐播放器

安装模块

```bash
npm install aplayer --save
```

编辑主题配置文件

```yaml
pjax:
  enable: true
  exclude:
aplayerInject:
  enable: true
  per_page: true
inject:
  bottom:
  - <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><meting-js  server="netease"  type="playlist" id="5161331134" fixed="true" autoplay="true" loop="all" order="random" preload="auto" list-folded="ture" list-max-height="500px"></meting-js>
```

meting-js标签中的参数：

| 选项                        | 默认        | 描述                                                      |
| --------------------------- | ----------- | --------------------------------------------------------- |
| id(编号)                    | **require** | 歌曲ID /播放列表ID /专辑ID /搜索关键字                    |
| server(平台)                | **require** | 音乐平台：`netease`，`tencent`，`kugou`，`xiami`，`baidu` |
| type（类型）                | **require** | `song`，`playlist`，`album`，`search`，`artist`           |
| auto（支持类种 类）         | options     | 音乐链接，支持：`netease`，`tencent`，`xiami`             |
| fixed（固定模式）           | `false`     | 启用固定模式，默认`false`                                 |
| autoplay（自动播放）        | `false`     | 音频自动播放，默认`false`                                 |
| theme(主题颜色)             | `#2980b9`   | 默认`#2980b9`                                             |
| loop（循环）                | `all`       | 播放器循环播放，值：“all”，one”，“none”                   |
| order(顺序)                 | `list`      | 播放器播放顺序，值：“list”，“random”                      |
| preload(加载)               | `auto`      | 值：“none”，“metadata”，“'auto”                           |
| volume（音量）              | `0.7`       | 默认音量，播放器会记住用户设置，用户自己设置音量后失效    |
| mutex（限制）               | `true`      | 独占播放，在该播放器开始播放时暂停其他播放器              |
| lrc-type（歌词）            | `0`         | 歌词显示                                                  |
| list-folded（列表折叠）     | `false`     | 指示列表是否应该首先折叠                                  |
| list-max-height（最大高度） | `340px`     | 列出最大高度                                              |
| storage-name（储存名称）    | `metingjs`  | 存储播放器设置的localStorage键                            |

# 注意事项

编辑yml文件中的参数时填写参数时要先输入一个空格，否则不过编译。

~~enable:true~~     ❌ &ensp;&ensp; enable: true     ✔

